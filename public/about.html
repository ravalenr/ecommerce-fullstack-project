<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us - Multi Store Eletro</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Fixed WhatsApp contact button -->
    <a href="https://api.whatsapp.com/send?phone=5511991215175&text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais%20sobre%20os%20produtos!" 
       class="whatsapp-float" 
       target="_blank" 
       title="Contact us on WhatsApp">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" width="50">
    </a>

    <!-- Header section with logo and navigation -->
        <header class="main-header">
        <div class="header-container">
            <!-- Logo Section -->
            <div class="logo">
                <a href="index.html">
                    <img src="img/logotipo.png" alt="Multi Store Eletro Logo" />
                </a>
            </div>

            <!-- Navigation Menu -->
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>

            <!-- User Actions Section -->
            <div class="header-actions">
                <!-- User Account Menu -->
                <div class="account-menu">
                    <button class="account-btn" id="accountBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span id="accountText">Account</span>
                        <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                            <path d="M6 9L1 4h10z"/>
                        </svg>
                    </button>
                    
                    <!-- Dropdown Menu -->
                    <div class="account-dropdown" id="accountDropdown">
                        <!-- Logged Out Menu -->
                        <div id="loggedOutMenu" style="display: none;">
                            <a href="login.html" class="dropdown-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                    <polyline points="10 17 15 12 10 7"></polyline>
                                    <line x1="15" y1="12" x2="3" y2="12"></line>
                                </svg>
                                Login
                            </a>
                            <a href="register.html" class="dropdown-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="8.5" cy="7" r="4"></circle>
                                    <line x1="20" y1="8" x2="20" y2="14"></line>
                                    <line x1="23" y1="11" x2="17" y2="11"></line>
                                </svg>
                                Register
                            </a>
                        </div>

                        <!-- Logged In Menu -->
                        <div id="loggedInMenu" style="display: none;">
                            <div class="dropdown-user-info">
                                <strong id="userName">User Name</strong>
                                <span id="userEmail">user@example.com</span>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="profile.html" class="dropdown-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                My Profile
                            </a>
                            <a href="#" class="dropdown-item" id="logoutBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16 17 21 12 16 7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                Logout
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Shopping Cart -->
                <a href="cart.html" class="cart-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="cart-badge" id="cartBadge">0</span>
                    <span class="cart-text">Cart</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Hero banner section -->
    <section class="about-hero">
        <div class="hero-content">
            <h1>About Multi Store Eletro</h1>
            <p>Your trusted partner for quality electronics since 2004.</p>
        </div>
    </section>

    <!-- Company story and mission/vision section -->
    <section id="about" class="section">
        <h2>Our Story</h2>
        <p>Multi Store Eletro was founded with a simple mission: to provide quality electronics and appliances at fair prices while delivering exceptional customer service. Based in SÃ£o Paulo, we have been serving our community with dedication and integrity.</p>
        
        <div class="mission-vision-grid">
            <div class="mv-card">
                <div class="mv-icon"></div>
                <h3>Our Mission</h3>
                <p>To market quality products at fair prices, exceeding customer expectations with specialized and personalized service.</p>
            </div>
            <div class="mv-card">
                <div class="mv-icon"></div>
                <h3>Our Vision</h3>
                <p>To be recognized as the best Electronics and Appliances store, establishing ourselves in the market as a reference in trust, quality, and excellence.</p>
            </div>
        </div>
    </section>

    <!-- Company values section -->
    <section id="values" class="section values-section">
        <h2>Our Core Values</h2>
        <p class="section-intro">These principles guide everything we do at Multi Store Eletro</p>
        
        <div class="values-grid">
            <div class="value-card">
                <div class="value-icon"></div>
                <h3>Customer Satisfaction</h3>
                <p>Your happiness is our priority. We go above and beyond to ensure every customer leaves satisfied.</p>
            </div>
            <div class="value-card">
                <div class="value-icon"></div>
                <h3>Quality Products</h3>
                <p>We carefully select products from reputable brands, ensuring reliability and longevity.</p>
            </div>
            <div class="value-card">
                <div class="value-icon"></div>
                <h3>Integrity & Transparency</h3>
                <p>Honest pricing, clear communication, and ethical business practices in every transaction.</p>
            </div>
            <div class="value-card">
                <div class="value-icon"></div>
                <h3>Innovation & Excellence</h3>
                <p>We stay current with technology trends to offer you the latest and best products available.</p>
            </div>
        </div>
    </section>

    <!-- Team section with image and description -->
    <section id="team" class="section team-section">
        <h2>Meet Our Team</h2>
        <div class="team-content">
            <div class="team-image">
                <img src="img/team.jpeg" 
                     alt="Multi Store Eletro Team">
            </div>
            <div class="team-text">
                <p>We are a dedicated team of electronics enthusiasts committed to providing the best shopping experience for our customers. Our staff undergoes regular training to stay updated on the latest products and technologies.</p>
                <p>From helping you choose the right TV for your living room to finding the perfect laptop for work or study, our knowledgeable team is ready to assist you with expert advice and personalized recommendations.</p>
                <ul class="team-features">
                    <li>Expert product knowledge</li>
                    <li>Multilingual customer support</li>
                    <li>After-sales service excellence</li>
                    <li>Professional installation assistance</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Call to action section -->
    <section class="cta-section">
        <div class="cta-content">
            <h2>Ready to Find Your Perfect Product?</h2>
            <p>Get in touch with our team for personalized assistance</p>
            <a href="contact.html" class="cta-button">Contact Us</a>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Multi Store Eletro. All rights reserved.</p>
    </footer>

    <script>
// ========================================
// HEADER FUNCTIONALITY
// ========================================

// API Configuration
const API_BASE_URL = 'http://localhost:3000/api';

// Initialize header on page load
document.addEventListener('DOMContentLoaded', function() {
    initializeHeader();
});

/**
 * Initialize all header functionality
 */
async function initializeHeader() {
    // Check authentication status
    await checkAuthStatus();
    
    // Update cart count
    await updateCartCount();
    
    // Setup event listeners
    setupHeaderEventListeners();
}

/**
 * Check if user is logged in and update UI
 */
async function checkAuthStatus() {
    try {
        const response = await fetch(`${API_BASE_URL}/auth/me`, {
            method: 'GET',
            credentials: 'include' // Important for cookies
        });

        if (response.ok) {
            const data = await response.json();
            // User is logged in
            updateHeaderForLoggedInUser(data.data);
        } else {
            // User is not logged in
            updateHeaderForLoggedOutUser();
        }
    } catch (error) {
        console.error('Error checking auth status:', error);
        updateHeaderForLoggedOutUser();
    }
}

/**
 * Update header for logged-in user
 */
function updateHeaderForLoggedInUser(userData) {
    const accountText = document.getElementById('accountText');
    const loggedInMenu = document.getElementById('loggedInMenu');
    const loggedOutMenu = document.getElementById('loggedOutMenu');
    const userName = document.getElementById('userName');
    const userEmail = document.getElementById('userEmail');

    // Update account button text
    const firstName = userData.full_name.split(' ')[0];
    accountText.textContent = `Hi, ${firstName}`;

    // Update dropdown user info
    userName.textContent = userData.full_name;
    userEmail.textContent = userData.email;

    // Show logged-in menu, hide logged-out menu
    loggedInMenu.style.display = 'block';
    loggedOutMenu.style.display = 'none';
}

/**
 * Update header for logged-out user
 */
function updateHeaderForLoggedOutUser() {
    const accountText = document.getElementById('accountText');
    const loggedInMenu = document.getElementById('loggedInMenu');
    const loggedOutMenu = document.getElementById('loggedOutMenu');

    // Update account button text
    accountText.textContent = 'Account';

    // Show logged-out menu, hide logged-in menu
    loggedInMenu.style.display = 'none';
    loggedOutMenu.style.display = 'block';
}

/**
 * Update cart count badge
 */
async function updateCartCount() {
    try {
        const response = await fetch(`${API_BASE_URL}/cart/count`, {
            method: 'GET',
            credentials: 'include'
        });

        if (response.ok) {
            const data = await response.json();
            const badge = document.getElementById('cartBadge');
            const count = data.count || 0;
            
            badge.textContent = count;
            
            // Show/hide badge based on count
            if (count > 0) {
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
    } catch (error) {
        console.error('Error fetching cart count:', error);
    }
}

/**
 * Setup event listeners for header interactions
 */
function setupHeaderEventListeners() {
    // Account dropdown toggle
    const accountBtn = document.getElementById('accountBtn');
    const accountDropdown = document.getElementById('accountDropdown');
    
    accountBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        accountDropdown.classList.toggle('show');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!accountBtn.contains(e.target)) {
            accountDropdown.classList.remove('show');
        }
    });

    // Logout functionality
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
        logoutBtn.addEventListener('click', handleLogout);
    }
}

/**
 * Handle logout
 */
async function handleLogout(e) {
    e.preventDefault();
    
    try {
        const response = await fetch(`${API_BASE_URL}/auth/logout`, {
            method: 'POST',
            credentials: 'include'
        });

        if (response.ok) {
            // Logout successful
            alert('Logged out successfully!');
            // Redirect to home page
            window.location.href = 'index.html';
        } else {
            alert('Error logging out. Please try again.');
        }
    } catch (error) {
        console.error('Error logging out:', error);
        alert('Error logging out. Please try again.');
    }
}

// Make updateCartCount available globally for other pages to call
window.updateCartCount = updateCartCount;
</script>
</body>
</html>