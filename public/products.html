<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Products - Multi Store Eletro</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header section -->
    <header class="main-header">
    <div class="header-container">
        <!-- Logo Section -->
        <div class="logo">
            <a href="index.html">
                <img src="img/logotipo.png" alt="Multi Store Eletro Logo" />
            </a>
        </div>

        <!-- Navigation Menu -->
        <nav class="main-nav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>

        <!-- User Actions Section -->
        <div class="header-actions">
            <!-- User Account Menu -->
            <div class="account-menu">
                <button class="account-btn" id="accountBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span id="accountText">Account</span>
                    <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M6 9L1 4h10z"/>
                    </svg>
                </button>
                
                <!-- Dropdown Menu -->
                <div class="account-dropdown" id="accountDropdown">
                    <!-- Logged Out Menu -->
                    <div id="loggedOutMenu" style="display: none;">
                        <a href="login.html" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                <polyline points="10 17 15 12 10 7"></polyline>
                                <line x1="15" y1="12" x2="3" y2="12"></line>
                            </svg>
                            Login
                        </a>
                        <a href="register.html" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                            </svg>
                            Register
                        </a>
                    </div>

                    <!-- Logged In Menu -->
                    <div id="loggedInMenu" style="display: none;">
                        <div class="dropdown-user-info">
                            <strong id="userName">User Name</strong>
                            <span id="userEmail">user@example.com</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="profile.html" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            My Profile
                        </a>
                        <a href="#" class="dropdown-item" id="logoutBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Logout
                        </a>
                    </div>
                </div>
            </div>

            <!-- Shopping Cart -->
            <a href="cart.html" class="cart-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span class="cart-badge" id="cartBadge">0</span>
                <span class="cart-text">Cart</span>
              </a>
          </div>
      </div>
  </header>

    <!-- Hero section -->
    <section class="products-hero">
        <div class="hero-content">
            <h1>Our Product Categories</h1>
            <p>Discover the best electronics and appliances at competitive prices</p>
        </div>
    </section>

    <!-- Meet our products video section -->
    <section id="featured-videos" class="section">
        <h2>Check Out Our Top Products</h2>
        <p class="section-intro">Watch these videos to see our finest products in action</p>
        
        <div class="video-grid">
            <!-- iPhone 17 Pro -->
            <div class="video-item">
                <h3>iPhone 17 Pro</h3>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/_-AS5DtDeqs" 
                            title="iPhone 17 Pro" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                <p>Latest flagship with amazing camera and performance</p>
            </div>

            <!-- Samsung Bespoke Refrigerator -->
            <div class="video-item">
                <h3>Samsung Bespoke Refrigerator</h3>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/A2HqZnKIViI" 
                            title="Samsung Bespoke Refrigerator" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                <p>Customizable design meets smart technology</p>
            </div>

            <!-- Samsung Frame Pro -->
            <div class="video-item">
                <h3>Samsung Frame Pro TV</h3>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/Q7Rxzgo96M0" 
                            title="Samsung Frame Pro TV" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                <p>TV that looks like art when not in use</p>
            </div>
        </div>

        <!-- Toggle button to show/hide videos -->
        <div style="text-align: center; margin-top: 20px;">
            <button id="toggleVideos" class="toggle-btn">Hide Videos</button>
        </div>
    </section>

    <!-- Main products section -->
    <section id="products" class="section">
        <h2>Browse Our Collection</h2>
        <p class="section-intro">Quality products from trusted brands, backed by excellent customer service and warranty support.</p>
        
        <div class="products-grid">
          
          <!-- TV Product Card -->
          <div class="product-card">
            <div class="product-image">
              <img src="img/tvs.jpeg" alt="Smart TVs">
              <div class="product-badge">Popular</div>
            </div>
            <div class="product-info">
              <h3>Smart TVs</h3>
              <p>Experience stunning picture quality with our range of 4K and OLED Smart TVs. From compact 32" to immersive 75" screens.</p>
              <ul class="product-features">
                <li>4K Ultra HD Resolution</li>
                <li>Smart TV Features</li>
                <li>Multiple HDMI Ports</li>
              </ul>
              <a href="contact.html" class="product-btn">Inquire Now</a>
            </div>
          </div>

          <!-- Fridge Product Card -->
          <div class="product-card">
            <div class="product-image">
              <img src="img/fridge.jpeg" alt="Refrigerators">
              <div class="product-badge">Best Value</div>
            </div>
            <div class="product-info">
              <h3>Refrigerators</h3>
              <p>Keep your food fresh with energy-efficient refrigerators. Single door, double door, and French door models available.</p>
              <ul class="product-features">
                <li>Energy Efficient A+ Rating</li>
                <li>Frost-Free Technology</li>
                <li>Adjustable Shelving</li>
              </ul>
              <a href="contact.html" class="product-btn">Inquire Now</a>
            </div>
          </div>

          <!-- Computer Product Card -->
          <div class="product-card">
            <div class="product-image">
              <img src="img/computers.jpeg" alt="Computers">
              <div class="product-badge">New Arrivals</div>
            </div>
            <div class="product-info">
              <h3>Computers & Laptops</h3>
              <p>High-performance desktops and portable laptops for work, gaming, and entertainment. Latest processors and graphics.</p>
              <ul class="product-features">
                <li>Latest Generation Processors</li>
                <li>SSD Storage Options</li>
                <li>Extended Warranty Available</li>
              </ul>
              <a href="contact.html" class="product-btn">Inquire Now</a>
            </div>
          </div>

          <!-- Smartphone Product Card -->
          <div class="product-card">
            <div class="product-image">
              <img src="img/telephone.png" alt="Smartphones">
              <div class="product-badge">Hot Deal</div>
            </div>
            <div class="product-info">
              <h3>Smartphones</h3>
              <p>Stay connected with the latest smartphones from top brands. 5G enabled, powerful cameras, and long battery life.</p>
              <ul class="product-features">
                <li>5G Connectivity</li>
                <li>High-Resolution Cameras</li>
                <li>Fast Charging Support</li>
              </ul>
              <a href="contact.html" class="product-btn">Inquire Now</a>
            </div>
          </div>

          <!-- Microwave Product Card -->
          <div class="product-card">
            <div class="product-image">
              <img src="img/microwaves.jpeg" alt="Microwaves">
            </div>
            <div class="product-info">
              <h3>Microwaves</h3>
              <p>Quick and convenient cooking with our selection of microwave ovens. Multiple power levels and preset cooking modes.</p>
              <ul class="product-features">
                <li>Multiple Power Settings</li>
                <li>Auto-Cook Menus</li>
                <li>Easy Clean Interior</li>
              </ul>
              <a href="contact.html" class="product-btn">Inquire Now</a>
            </div>
          </div>

          <!-- Photography Product Card -->
          <div class="product-card">
            <div class="product-image">
              <img src="img/photography.jpeg" alt="Cameras">
            </div>
            <div class="product-info">
              <h3>Photography Equipment</h3>
              <p>Capture life's moments with professional cameras, lenses, and accessories. Perfect for beginners and professionals.</p>
              <ul class="product-features">
                <li>DSLR & Mirrorless Options</li>
                <li>Professional Lenses</li>
                <li>Accessories & Tripods</li>
              </ul>
              <a href="contact.html" class="product-btn">Inquire Now</a>
            </div>
          </div>

        </div>
    </section>

    <!-- Call to action -->
    <section class="cta-section">
        <div class="cta-content">
            <h2>Can't Find What You're Looking For?</h2>
            <p>Our team is here to help you find the perfect product for your needs. Contact us today!</p>
            <a href="contact.html" class="cta-button">Contact Us Now</a>
        </div>
    </section>

    <!-- WhatsApp floating button -->
    <a href="https://api.whatsapp.com/send?phone=5511991215175&text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais%20sobre%20os%20produtos!" 
        class="whatsapp-float" 
        target="_blank" 
        title="Contact us on WhatsApp">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" width="50">
    </a>

    <footer>
        <p>&copy; 2025 Multi Store Eletro. All rights reserved.</p>
    </footer>

    <script>
        // Product cards scroll animation
        window.addEventListener('scroll', function() {
            const cards = document.querySelectorAll('.product-card');
            
            cards.forEach(function(card) {
                const position = card.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (position < windowHeight * 0.8) {
                    card.classList.add('is-visible');
                }
            });
        });

        // Toggle videos section visibility
        const toggleBtn = document.getElementById('toggleVideos');
        const videosSection = document.getElementById('featured-videos');
        let videosVisible = true;

        toggleBtn.addEventListener('click', function() {
            const videoGrid = document.querySelector('.video-grid');
            const intro = videosSection.querySelector('.section-intro');
            
            if (videosVisible) {
                videoGrid.style.display = 'none';
                intro.style.display = 'none';
                toggleBtn.textContent = 'Show Videos';
                videosVisible = false;
            } else {
                videoGrid.style.display = 'grid';
                intro.style.display = 'block';
                toggleBtn.textContent = 'Hide Videos';
                videosVisible = true;
            }
        });
        // ========================================
        // HEADER FUNCTIONALITY
        // ========================================

        // API Configuration
        const API_BASE_URL = 'http://localhost:3000/api';

        // Initialize header on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeHeader();
        });

        /**
         * Initialize all header functionality
         */
        async function initializeHeader() {
            // Check authentication status
            await checkAuthStatus();
            
            // Update cart count
            await updateCartCount();
            
            // Setup event listeners
            setupHeaderEventListeners();
        }

        /**
         * Check if user is logged in and update UI
         */
        async function checkAuthStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/me`, {
                    method: 'GET',
                    credentials: 'include' // Important for cookies
                });

                if (response.ok) {
                    const data = await response.json();
                    // User is logged in
                    updateHeaderForLoggedInUser(data.data);
                } else {
                    // User is not logged in
                    updateHeaderForLoggedOutUser();
                }
            } catch (error) {
                console.error('Error checking auth status:', error);
                updateHeaderForLoggedOutUser();
            }
        }

        /**
         * Update header for logged-in user
         */
        function updateHeaderForLoggedInUser(userData) {
            const accountText = document.getElementById('accountText');
            const loggedInMenu = document.getElementById('loggedInMenu');
            const loggedOutMenu = document.getElementById('loggedOutMenu');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');

            // Update account button text
            const firstName = userData.full_name.split(' ')[0];
            accountText.textContent = `Hi, ${firstName}`;

            // Update dropdown user info
            userName.textContent = userData.full_name;
            userEmail.textContent = userData.email;

            // Show logged-in menu, hide logged-out menu
            loggedInMenu.style.display = 'block';
            loggedOutMenu.style.display = 'none';
        }

        /**
         * Update header for logged-out user
         */
        function updateHeaderForLoggedOutUser() {
            const accountText = document.getElementById('accountText');
            const loggedInMenu = document.getElementById('loggedInMenu');
            const loggedOutMenu = document.getElementById('loggedOutMenu');

            // Update account button text
            accountText.textContent = 'Account';

            // Show logged-out menu, hide logged-in menu
            loggedInMenu.style.display = 'none';
            loggedOutMenu.style.display = 'block';
        }

        /**
         * Update cart count badge
         */
        async function updateCartCount() {
            try {
                const response = await fetch(`${API_BASE_URL}/cart/count`, {
                    method: 'GET',
                    credentials: 'include'
                });

                if (response.ok) {
                    const data = await response.json();
                    const badge = document.getElementById('cartBadge');
                    const count = data.count || 0;
                    
                    badge.textContent = count;
                    
                    // Show/hide badge based on count
                    if (count > 0) {
                        badge.style.display = 'flex';
                    } else {
                        badge.style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Error fetching cart count:', error);
            }
        }

        /**
         * Setup event listeners for header interactions
         */
        function setupHeaderEventListeners() {
            // Account dropdown toggle
            const accountBtn = document.getElementById('accountBtn');
            const accountDropdown = document.getElementById('accountDropdown');
            
            accountBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                accountDropdown.classList.toggle('show');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!accountBtn.contains(e.target)) {
                    accountDropdown.classList.remove('show');
                }
            });

            // Logout functionality
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', handleLogout);
            }
        }

        /**
         * Handle logout
         */
        async function handleLogout(e) {
            e.preventDefault();
            
            try {
                const response = await fetch(`${API_BASE_URL}/auth/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });

                if (response.ok) {
                    // Logout successful
                    alert('Logged out successfully!');
                    // Redirect to home page
                    window.location.href = 'index.html';
                } else {
                    alert('Error logging out. Please try again.');
                }
            } catch (error) {
                console.error('Error logging out:', error);
                alert('Error logging out. Please try again.');
            }
        }

        // Make updateCartCount available globally for other pages to call
        window.updateCartCount = updateCartCount;
    </script>
</body>
</html>