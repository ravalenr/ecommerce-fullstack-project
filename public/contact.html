<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Multi</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="overlay" id="pageOverlay"></div>

    <!-- Header with navigation, search, account, and cart -->
    <header class="main-header">
        <div class="header-container">

            <button class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()" aria-label="Open Menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>

            <div class="header-logo">
                <a href="index.html">
                    <img src="img/logotipo.png" alt="Multi Store Eletro Logo" />
                </a>
            </div>

            <nav class="main-nav" id="mainNav">
                <div class="mobile-search">
                    <form class="search-form" onsubmit="handleSearch(event)">
                        <input type="text" class="search-input" placeholder="Search for products..." autocomplete="off">
                        <button type="submit" class="search-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                    </form>
                </div>
                <a href="index.html" class="nav-link">Home</a>
                <a href="products.html" class="nav-link">Products</a>
                <a href="about.html" class="nav-link">About Us</a>
                <a href="contact.html" class="nav-link">Contact</a>
                <a href="login.html" class="nav-link" id="mobileAuthLink" style="display: none;">Sign In</a>
            </nav>

            <div class="header-search">
                <form class="search-form" onsubmit="handleSearch(event)">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search for products..." autocomplete="off">
                    <button type="submit" class="search-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                </form>
                <div class="search-suggestions" id="searchSuggestions" style="display: none;"></div>
            </div>

            <div class="header-actions">
                <div class="account-menu">
                    <button class="account-btn" id="accountBtn" onclick="toggleAccountMenu()">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <div class="account-info">
                            <span class="account-greeting">Hello</span>
                            <span class="account-name" id="accountName">Sign In</span>
                        </div>
                    </button>

                    <div class="account-dropdown" id="accountDropdown">
                        <div id="loggedOutMenu">
                            <a href="login.html" class="dropdown-item">Sign In</a>
                            <a href="register.html" class="dropdown-item">Register</a>
                        </div>
                        <div id="loggedInMenu" style="display: none;">
                            <a href="profile.html" class="dropdown-item">My Account</a>
                            <a href="#" class="dropdown-item" onclick="handleLogout(event)">Sign Out</a>
                        </div>
                    </div>
                </div>

                <a href="cart.html" class="cart-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="cart-badge" id="cartBadge">0</span>
                    <div class="cart-info">
                        <span class="cart-greeting">Cart</span>
                        <span class="cart-count" id="cartCount">0 items</span>
                    </div>
                </a>
            </div>
        </div>
    </header>

    <!-- Contact form section -->
    <section id="contact-form" class="section">
        <h2>Send Us a Message</h2>
        <p>Have a question or need assistance? Fill out the form below and we'll get back to you as soon as possible.</p>
        
        <!-- Contact form with validation -->
        <form id="contactForm" onsubmit="return validateForm(event)">
            
            <!-- Name input field -->
            <div class="form-group">
                <label for="name">Full Name: *</label>
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    placeholder="Enter your full name"
                >
                <!-- Error message container for name field -->
                <span id="nameError" class="error-message"></span>
            </div>

            <!-- Phone input field -->
            <div class="form-group">
                <label for="phone">Phone Number: *</label>
                <input 
                    type="text" 
                    id="phone" 
                    name="phone" 
                    placeholder="Enter your phone number (9 or 10 digits)"
                >
                <!-- Error message container for phone field -->
                <span id="phoneError" class="error-message"></span>
            </div>

            <!-- Email input field -->
            <div class="form-group">
                <label for="email">Email Address: *</label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    placeholder="Enter your email address"
                >
                <!-- Error message container for email field -->
                <span id="emailError" class="error-message"></span>
            </div>

            <!-- Query textarea field -->
            <div class="form-group">
                <label for="query">Nature of Query: *</label>
                <textarea 
                    id="query" 
                    name="query" 
                    rows="5" 
                    placeholder="Please describe your inquiry or question"
                ></textarea>
                <!-- Error message container for query field -->
                <span id="queryError" class="error-message"></span>
            </div>

            <!-- Submit button -->
            <button type="submit" class="submit-btn">Send Message</button>
            
            <!-- Success message container (hidden by default) -->
            <div id="successMessage" class="success-message"></div>
        </form>
    </section>

    <!-- Contact information section -->
    <section id="contact" class="section">
        <h2>Other Ways to Reach Us</h2>
        <p>Prefer to contact us directly? You can also reach us through:</p>
        <p><strong>E-mail:</strong> <a href="mailto:multijustforfun@gmail.com">multijustforfun@gmail.com</a></p>
        <p><strong>WhatsApp:</strong>
        <a href="https://api.whatsapp.com/send?phone=5511991215175&text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais%20sobre%20os%20produtos!" 
        target="_blank" 
        title="Contact us on WhatsApp">
        <img src="img/whatsapp.png" alt="WhatsApp" width="20"> (11) 91234-5678
        </a></p>
        <p><strong>Address:</strong> SÃ£o Paulo - SP</p>
    </section>

    <!-- WhatsApp floating button -->
    <a href="https://api.whatsapp.com/send?phone=5511991215175&text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais%20sobre%20os%20produtos!" 
        class="whatsapp-float" 
        target="_blank" 
        title="Contact us on WhatsApp">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" width="50">
    </a>

    <!-- Footer section -->
    <footer>
        <p>&copy; 2025 Multi Store Eletro. All rights reserved.</p>
    </footer>

    <!-- JavaScript for form validation -->
    <script>
        // Main function to validate the contact form - runs when form is submitted
        function validateForm(event) {
            // Avoids the default form submission
            event.preventDefault();
            
            // clears any previous error messages
            clearErrors();
            
            // get form field values and trim answers
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            const query = document.getElementById('query').value.trim();
            
            // boolean to check if is valid
            let isValid = true;
            
            // Validate name 
            if (!validateName(name)) {
                isValid = false;
            }
            
            // Validate phone 
            if (!validatePhone(phone)) {
                isValid = false;
            }
            
            // Validate email 
            if (!validateEmail(email)) {
                isValid = false;
            }
            
            // Validate query 
            if (!validateQuery(query)) {
                isValid = false;
            }
            
            // If all validations pass, show success message
            if (isValid) {
                showSuccessMessage();
                document.getElementById('contactForm').reset();
            }
            return false;
        }


        function validateName(name) {
            // Check if name field is empty
            if (name === '') {
                showError('nameError', 'Please enter your name.');
                return false;
            }
            
            // RegEx: only letters and spaces allowed
            const namePattern = /^[a-zA-Z\s]+$/;
            
            // Check if name matches the pattern
            if (!namePattern.test(name)) {
                showError('nameError', 'Name must contain only letters and spaces (no numbers or symbols).');
                return false;
            }
            
            return true;
        }

        function validatePhone(phone) {
            // Check if field is empty
            if (phone === '') {
                showError('phoneError', 'Please enter your phone number.');
                return false;
            }
            
            // RegEx: only digits allowed
            const phonePattern = /^[0-9]+$/;
            
            // Check if contains only numbers
            if (!phonePattern.test(phone)) {
                showError('phoneError', 'Phone number must contain only numeric digits.');
                return false;
            }
            
            // Check if is 9 or 10 digits long
            if (phone.length < 9 || phone.length > 10) {
                showError('phoneError', 'Phone number must be 9 or 10 digits long.');
                return false;
            }
            
            return true;
        }

        function validateEmail(email) {
            // Check if field is empty
            if (email === '') {
                showError('emailError', 'Please enter your email address.');
                return false;
            }

            // email pattern is also validated by html5 input type="email"
            return true;
        }

        function validateQuery(query) {
            // Check if field is empty
            if (query === '') {
                showError('queryError', 'Please describe the nature of your inquiry.');
                return false;
            }
            
            return true;
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        // Clears all error messages from the form
        function clearErrors() {
            // Get elements with 'error-message'
            const errorMessages = document.querySelectorAll('.error-message');

            // Loop and hide error messages
            errorMessages.forEach(function(error) {
                error.textContent = '';
                error.style.display = 'none';
            });
            
            // Also hide success message when clearing errors
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'none';
        }

        // Disoplay success message, hide after 5 seconds
        function showSuccessMessage() {
            const successMessage = document.getElementById('successMessage');
            successMessage.textContent = 'Thank you for your message! We will get back to you soon.';
            successMessage.style.display = 'block';
            
            // Hide success message after 5 seconds
            setTimeout(function() {
                successMessage.style.display = 'none';
            }, 5000);
        }

        // Header functionality is now handled by utils.js and header-script.js
    </script>

    <!-- Load utility functions (includes shared helpers) -->
    <script src="js/utils.js"></script>
    <!-- Load header functionality (handles auth, cart, search) -->
    <script src="header-script.js"></script>
</body>
</html>